/**
 * videojs-dotsub-selector
 * @version 0.1.3
 * @copyright 2016 Brooks Lyrette <brooks@dotsub.com>
 * @license Apache-2.0
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.videojsDotsubSelector=e()}}(function(){return function e(t,n,o){function r(i,a){if(!n[i]){if(!t[i]){var l="function"==typeof require&&require;if(!a&&l)return l(i,!0);if(u)return u(i,!0);var f=new Error("Cannot find module '"+i+"'");throw f.code="MODULE_NOT_FOUND",f}var s=n[i]={exports:{}};t[i][0].call(s.exports,function(e){var n=t[i][1][e];return r(n?n:e)},s,s.exports,e,t,n,o)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}({1:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,u=t,i=n;o=!1,null===r&&(r=Function.prototype);var a=Object.getOwnPropertyDescriptor(r,u);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(i)}var f=Object.getPrototypeOf(r);if(null===f)return;e=f,t=u,n=i,o=!0,a=f=void 0}},f="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,s=r(f),c=e("./DotsubTrackItem.js"),d=r(c),p=s["default"].getComponent("MenuButton"),y="Captions Off",v="vjs-dotsub-selector-language",b=function(e){function t(e,n){var o=this;u(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),e.on("trackselected",function(e,t){var n=o.player_.el().getElementsByClassName(v)[0];t?n.innerHTML=t.language.name+" - "+t.name:n.innerHTML=y})}return i(t,e),a(t,[{key:"buildCSSClass",value:function(){return"vjs-dotsub-selector-button vjs-menu-button "+l(Object.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)}},{key:"createEl",value:function(){var e=l(Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:this.buildCSSClass()}),n=document.createElement("span");return n.classList.add(v),n.innerHTML=y,e.appendChild(n),e}},{key:"createItems",value:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];e.push(new d["default"](this.player_,{label:y}));var t=!0,n=!1,o=void 0;try{for(var r,u=this.options_.dotsubTracks[Symbol.iterator]();!(t=(r=u.next()).done);t=!0){var i=r.value;e.push(new d["default"](this.player_,{label:i.language.name+" - "+i.name,track:i}))}}catch(a){n=!0,o=a}finally{try{!t&&u["return"]&&u["return"]()}finally{if(n)throw o}}return e}}]),t}(p);s["default"].registerComponent("DotsubTrackButton",b),n["default"]=b,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./DotsubTrackItem.js":2}],2:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,u=t,i=n;o=!1,null===r&&(r=Function.prototype);var a=Object.getOwnPropertyDescriptor(r,u);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(i)}var f=Object.getPrototypeOf(r);if(null===f)return;e=f,t=u,n=i,o=!0,a=f=void 0}},f="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,s=r(f),c=e("./constants.js"),d=s["default"].getComponent("MenuItem"),p=function(e){function t(e,n){u(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return i(t,e),a(t,[{key:"handleClick",value:function(){l(Object.getPrototypeOf(t.prototype),"handleClick",this).call(this),this.player_.trigger(c.TRACKS_SELECTED_EVENT,this.options_.track)}}]),t}(d);s["default"].registerComponent("DotsubTrackItem",p),n["default"]=p,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./constants.js":3}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o="trackselected";n.TRACKS_SELECTED_EVENT=o;var r="captions";n.CAPTIONS_EVENT=r;var u="language";n.LANGUAGE_EVENT=u;var i="selectorready";n.READY_EVENT=i;var a="loadtracks";n.LOAD_EVENT=a},{}],4:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var u="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,i=r(u);e("./DotsubTrackButton.js");var a=e("./constants.js"),l={loadFirstTrack:!0},f=function(e,t,n){var o=t.controlBar.addChild("DotsubTrackButton",{dotsubTracks:e}),r=document.getElementsByClassName("vjs-volume-menu-button")[0];t.controlBar.el().insertBefore(o.el(),r),n.loadFirstTrack&&e.length>0&&t.trigger(a.TRACKS_SELECTED_EVENT,e[0])},s=function(e,t,n){(0,u.xhr)("/api/v3/media/"+e+"/tracks",function(e,o,r){if(!e){var u=JSON.parse(r);f(u,t,n)}})},c=function(e,t){e?(0,u.xhr)("/api/v3/tracks/"+e.trackId,function(n,o,r){if(n||200!==o.statusCode)t.trigger(a.CAPTIONS_EVENT,[]);else{var u=JSON.parse(r);e.language&&t.trigger(a.LANGUAGE_EVENT,e.language),t.trigger(a.CAPTIONS_EVENT,u)}}):t.trigger(a.CAPTIONS_EVENT,[])},d=function(e,t){e.addClass("vjs-dotsub-selector"),e.on(a.LOAD_EVENT,function(n,o){return s(o,e,t)}),e.on(a.TRACKS_SELECTED_EVENT,function(t,n){return c(n,e)}),e.trigger(a.READY_EVENT)},p=function(e){var t=this;this.ready(function(){d(t,i["default"].mergeOptions(l,e))})};i["default"].plugin("dotsubSelector",p),p.VERSION="0.1.3",n["default"]=p,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./DotsubTrackButton.js":1,"./constants.js":3}]},{},[4])(4)});